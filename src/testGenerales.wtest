import musicos.*
import canciones.*
import guitarras.*
import establecimientos.*
import presentaciones.*
import albumes.*

describe "Test generales"{
	const joaquin
	const lucia
	const soledad
	const kike
	const fender
	const gibsonSana
	const gibsonNoSana
	const cancionCisne
	const cancionLaFamilia
	const cancionEres
	const cancionCorazonAmericano
	const cancionAlmaDeDiamante
	const cancionCrisantemo
	const albumEspecialLaFamilia
	const albumLaSole
	const albumParaLosArboles
	const albumJustCrisantemo
	const presentacionLunaPark
	const presentacionLaTrastienda
	const criterioDuracion
	const criterioLargoDeLetra
	const letraRemixLaFamilia
	const cancionRemix
	fixture {
		joaquin = new MusicoDeGrupoBuilder()
			.habilidadBase(20)
			.habilidadSiTocaEnGrupo(5)
			.tocaEnGrupo(true)
			.build()
		kike = new MusicoDeGrupoBuilder()
			.habilidadBase(60)
			.habilidadSiTocaEnGrupo(20)
			.tocaEnGrupo(true)
			.build()
		lucia = new VocalistaPopularBuilder()
			.habilidadBase(70)
			.habilidadSiTocaEnGrupo(-20)
			.tocaEnGrupo(true)
			.palabraMagica("familia")
			.build()
		soledad = new VocalistaPopularBuilder()
			.habilidadBase(55)
			.habilidadSiTocaEnGrupo(0)
			.tocaEnGrupo(false)
			.palabraMagica("amor")
			.build()
		fender = new Guitarra(10)
		gibsonSana = new Guitarra(15)
		gibsonNoSana = new Guitarra(5)
		cancionCisne = new Cancion("Cisne", 312, "Hoy el viento se
							abri� qued� vac�o el aire una vez m�s y el manantial brot� y nadie est�
							aqu� y puedo ver que solo estallan las hojas al brillar")
		cancionLaFamilia = new Cancion("La familia", 264, "Quiero brindar por mi gente sencilla, por el amor brindo por la familia")
		cancionEres = new Cancion("Eres", 145, "Eres lo mejor que me
							pas� en la vida, no tengo duda, no habr� m�s nada despu�s de ti. Eres
							lo que le dio brillo al d�a a d�a, y as� ser� por siempre, no cambiar�,
							hasta el final de mis d�as.")
		cancionCorazonAmericano = new Cancion("Coraz�n americano", 154, "Canta
										coraz�n, canta m�s alto, que tu pena al fin se va marchando, el nuevo
										milenio ha de encontrarnos, junto coraz�n, como so�amos.")
		cancionAlmaDeDiamante = new Cancion("Alma de diamante", 216, "Ven a m�
										con tu dulce luz alma de diamante. Y aunque el sol se nuble
										despu�s sos alma de diamante. Cielo o piel silencio o verdad sos
										alma de diamante. Por eso ven as� con la humanidad alma de
										diamante")
		cancionCrisantemo = new Cancion("Crisantemo", 175, "T�came junto a
									esta pared, yo quede por aqu�... cuando no hubo m�s luz...
									quiero mirar a trav�s de mi piel... Crisantemo, que se abri�...
									encuentra el camino hacia el cielo")
		albumEspecialLaFamilia = new AlbumBuilder()
			.fecha(17, 6, 1992)
			.copiasVendidas(89000)
			.copiasEditadas(100000)
			.agregarCancion(cancionLaFamilia)
			.build()
		albumLaSole = new AlbumBuilder()
			.fecha(4, 2, 2005)
			.copiasVendidas(130000)
			.copiasEditadas(200000)
			.agregarCancion(cancionCorazonAmericano)
			.agregarCancion(cancionEres)
			.build()
		albumParaLosArboles = new AlbumBuilder()
			.fecha(31, 3, 2003)
			.copiasVendidas(49000)
			.copiasEditadas(50000)
			.agregarCancion(cancionCisne)
			.agregarCancion(cancionAlmaDeDiamante)
			.build()
		albumJustCrisantemo = new AlbumBuilder()
			.fecha(5, 12, 2007)
			.copiasVendidas(27500)
			.copiasEditadas(28000)
			.agregarCancion(cancionCrisantemo)
			.build()	
		presentacionLunaPark = new Presentacion(new Date(20,4,2017), lunaPark, #{luisAlberto, joaquin, lucia})
		presentacionLaTrastienda = new Presentacion(new Date(15,11,2017), laTrastienda, #{luisAlberto, joaquin, lucia})
		joaquin.albumes().add(albumEspecialLaFamilia)
		soledad.albumes().add(albumLaSole)
		luisAlberto.albumes().add(albumParaLosArboles)
		luisAlberto.albumes().add(albumJustCrisantemo)
		
		/* FIXTURE TERCERA PARTE */
		criterioDuracion = new Duracion()
		criterioLargoDeLetra = new LargoDeLetra()
		letraRemixLaFamilia = "mueve tu cuelpo baby Quiero brindar por mi gente sencilla, por el amor brindo por la familia yeah oh yeah"
		cancionRemix = new CancionRemix()
	}
	/* A PARTIR DE AC� ES LA TERCERA PARTE */
	test "Saber cu�l es la canci�n m�s larga del �lbum 'Especial La Familia', teniendo en cuenta la duraci�n" {
		assert.equals(cancionLaFamilia, albumEspecialLaFamilia.cancionMasLargaPorCriterio(criterioDuracion))
	}
	
	test "Saber cu�l es la canci�n m�s larga del �lbum 'La Sole', teniendo en cuenta la duraci�n" {
		assert.equals(cancionCorazonAmericano, albumLaSole.cancionMasLargaPorCriterio(criterioDuracion))
	}
	test "Saber cu�l es la canci�n m�s larga del �lbum 'La Sole', teniendo en cuenta la longitud de letra" {
		assert.equals(cancionEres, albumLaSole.cancionMasLargaPorCriterio(criterioLargoDeLetra))
	}
	
	test "Saber cu�nto dura el remix de �La Familia�" {
//		cancionLaFamilia.transformarARemix()
//		assert.equals(792, cancionLaFamilia.duracion())
		cancionLaFamilia.transformarARemix(cancionRemix)
		assert.equals(792, cancionRemix.duracion())
	}
	
	test "Saber cu�l es la letra del remix de �La Familia�" {
//		cancionLaFamilia.transformarARemix()
//		assert.equals(letraRemixLaFamilia, cancionLaFamilia.letra())
		cancionLaFamilia.transformarARemix(cancionRemix)
		assert.equals(letraRemixLaFamilia, cancionRemix.letra())
	}
	/* A PARTIR DE AC� ES LA PRIMERA PARTE */
	test "Joaqu�n canta en el grupo Pimpinela. Queremos conocer su habilidad" {	
		assert.equals(25,joaquin.habilidad())
	}
	test "Joaqu�n canta en el grupo Pimpinela, y decide lanzar su carrera solista (deja el grupo). Queremos conocer
	su habilidad."{
		joaquin.tocaEnGrupo(false)
		assert.equals(20, joaquin.habilidad())
	}
	test "Luc�a canta en el grupo Pimpinela. Queremos saber
	su habilidad."{
		assert.equals(50,lucia.habilidad())
	}
	test "Luc�a canta en el grupo Pimpinela, y lanza su carrera solista (deja el grupo). Queremos conocer su
	habilidad."{
		lucia.tocaEnGrupo(false)
		assert.equals(70, lucia.habilidad())
	}
	test "Luis Alberto toca con la Fender. Queremos saber su
	habilidad."{
		luisAlberto.guitarra(fender)
		assert.equals(80, luisAlberto.habilidad())
	}
	test "Luis Alberto toca ahora con la Gibson sana.
	Queremos saber su habilidad."{
		luisAlberto.guitarra(gibsonSana)
		assert.equals(100, luisAlberto.habilidad())
	}
	test "Alguien trata mal a la Gibson y ahora no est� sana. Luis Alberto toca con la Gibson. Queremos saber su
	habilidad."{
		luisAlberto.guitarra(gibsonNoSana)
		assert.equals(40, luisAlberto.habilidad())
	}
	test "Queremos saber si Joaqu�n interpreta bien la canci�n La Familia"{
		assert.notThat(joaquin.interpretaBien(cancionLaFamilia))
	}
	test "Queremos saber si Joaqu�n interpreta bien la canci�n Cisne"{
		assert.that(joaquin.interpretaBien(cancionCisne))
	}
	test "Queremos saber si Luc�a interpreta bien la canci�n La Familia"{
		assert.that(lucia.interpretaBien(cancionLaFamilia))
	}
	test "Queremos saber si Luc�a interpreta bien la canci�n Cisne"{
		assert.notThat(lucia.interpretaBien(cancionCisne))
	}
	test "Queremos saber si Luis Alberto interpreta bien la canci�n La Familia"{
		assert.that(luisAlberto.interpretaBien(cancionLaFamilia))
	}
	test "Queremos saber si Luis Alberto interpreta bien la canci�n Cisne"{
		assert.that(luisAlberto.interpretaBien(cancionCisne))
	}
	test "Queremos saber cu�nto cobra Joaqu�n por la presentaci�n del Luna Park"{
		assert.equals(50,joaquin.ganancia(presentacionLunaPark))
	}
	test "Modificar la presentaci�n de la Trastienda para que solo act�e Joaqu�n.
	Queremos saber cu�nto cobra Joaqu�n por la presentaci�n de la Trastienda del 15/11/2017"{
		presentacionLaTrastienda.cantantes(#{joaquin})
		assert.equals(100,joaquin.ganancia(presentacionLaTrastienda))
	}
	test "Queremos saber la capacidad de La Trastienda para el 05 de agosto del 2017"{
		const dia = new Date(5,8,2017)
		assert.equals(700, laTrastienda.capacidadTotal(dia))
	}
	test "Saber la capacidad de La Trastienda para el 08 de agosto del 2017" {
		const dia = new Date(8,8,2017)
		assert.equals(400, laTrastienda.capacidadTotal(dia))
	}
	test "Queremos saber cu�nto cobra Luc�a por la presentaci�n del Luna Park"{
		assert.equals(500, lucia.ganancia(presentacionLunaPark))
	}
	test "Queremos saber cu�nto cobra Luc�a por la presentaci�n de La Trastienda"{
		assert.equals(400, lucia.ganancia(presentacionLaTrastienda))
	}
	test "Queremos saber cu�nto cobra Luis Alberto por la presentaci�n del Luna Park"{
		assert.equals(1000, luisAlberto.ganancia(presentacionLunaPark))
	}
	test "Queremos saber cu�nto cobra Luis Alberto por la presentaci�n de La Trastienda"{
		assert.equals(1200, luisAlberto.ganancia(presentacionLaTrastienda))
	}
	test "Queremos saber el costo de la presentaci�n del Luna Park"{
		assert.equals(1550, presentacionLunaPark.costoTotal())
	}
	test "Queremos saber el costo de la presentaci�n de la Trastienda el 15/11/2017"{
		assert.equals(1650, presentacionLaTrastienda.costoTotal())
	}
	/* A PARTIR DE AC� ES LA SEGUNDA PARTE */
	test "Saber si la canci�n �Crisantemo� es corta"{
		assert.that(cancionCrisantemo.esCorta())
	}
	test "Saber si la canci�n �Alma de diamante� es corta"{
		assert.notThat(cancionAlmaDeDiamante.esCorta())
	}
	test "Saber si Soledad es minimalista"{
		assert.that(soledad.esMinimalista())
	}
	test "Saber si Luis Alberto es minimalista"{
		assert.notThat(luisAlberto.esMinimalista())
	}
	test "Saber si Joaqu�n es minimalista"{
		assert.notThat(joaquin.esMinimalista())
	}
	test "Saber qu� canciones de Luis Alberto tienen la palabra 'cielo' "{
		assert.equals(#{cancionCrisantemo, cancionAlmaDeDiamante}, luisAlberto.cancionesContienenPalabra("cielo"))
	}
	test "Saber qu� canciones de Luis Alberto tienen la palabra 'pujante' "{
		assert.equals(#{}, luisAlberto.cancionesContienenPalabra("pujante"))
	}
	test "Saber cu�ntos segundos dura la obra de Kike"{
		assert.equals(0, kike.duracionDeObra())
	}
	test "Saber cu�ntos segundos dura la obra de Soledad"{
		assert.equals(299, soledad.duracionDeObra())
	}
	test "Saber cu�ntos segundos dura la obra de Luis Alberto"{
		assert.equals(703, luisAlberto.duracionDeObra())
	}
	test "Saber qu� canci�n es m�s larga del �lbum �Para los �rboles"{
		assert.equals(cancionAlmaDeDiamante, albumParaLosArboles.cancionMasLarga())
	}
	test "Saber qu� canci�n es m�s larga del �lbum �La Sole"{
		assert.equals(cancionEres, albumLaSole.cancionMasLarga())
	}
	test "Saber qu� canci�n es m�s larga del �lbum �Especial La Familia"{
		assert.equals(cancionLaFamilia, albumEspecialLaFamilia.cancionMasLarga())
	}
	test "Queremos saber si Luis Alberto la peg�"{
		assert.that(luisAlberto.laPego())
	}
	test "Queremos saber si Soledad la peg�"{
		assert.notThat(soledad.laPego())
	}
	test "Queremos saber si Joaqu�n la peg�"{
		assert.that(joaquin.laPego())
	}
}